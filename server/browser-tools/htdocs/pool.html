<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="css/diQuery-collapsiblePanel.css">
<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.scrollTo-1.4.2-min.js"></script>
<script type="text/javascript" src="js/URI.js"></script>
<script type="text/javascript" src="js/base64.js"></script>
<script type="text/javascript" src="js/api.js"></script>
<link rel="stylesheet" type="text/css" href="css/style.bundle.css">
<link rel="stylesheet" type="text/css" href="css/vendors.bundle.css">
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>

<script>
  WebFont.load({
    google: {"families":["Poppins:300,400,500,600,700","Roboto:300,400,500,600,700"]},
    active: function() {
        sessionStorage.fonts = true;
    }
  });
</script>
</head>
<body>
<form id="page1">
        <div class="row">
             <div class="col-md-12">
                  <label><h3>Token Distribution Pool</h3></label>
             </div>
        </div>

        <hr>
        
        <div class="row">
             <div class="col-md-3">
                  <label>Your wallet address</label>
             </div>
             <div class="col-md-3">
                 <input name="address" class="address_val" type="text" id="address" placeholder="" aria-invalid="false" aria-required="false">
              </div>
        </div>
        <div class="row">
             <div class="col-md-12">
                  <h3>Allocations</h3>
             </div>
        </div>
        <div class="row">
            <div class="col-md-3">
    
                    <label>Maximum Allocation (ETH)</label>
            
             </div>
             <div class="col-md-3">
    
                    <input name="max_contrib" matinput="" type="text" id="max_contrib" value='100000' placeholder="" aria-invalid="false" aria-required="false">
             </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <label>Maximum Per Contributor (ETH)</label>
            </div>
             <div class="col-md-3">
                <input name="max_per_contribr" matinput="" type="text" id="max_per_contrib"  value='100000' placeholder="" aria-invalid="false" aria-required="false">
             </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <label>Minimum Per Contributor (ETH)</label>
            </div>
             <div class="col-md-3">
                <input name="min_per_contrib" matinput="" type="text" id="min_per_contrib" value='1' placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>

        <hr>

        <div class="row">
            <div class="col-md-12">

              <h3>
                Admins
              </h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
    
              <label>Admin 1 Wallet Address</label>
              
            </div>
            <div class="col-md-3">
              
              <input name="admin1" class="address_val" type="text" id="admin1" placeholder="" aria-invalid="false" aria-required="false">
          
             </div>
        </div>
        <div class="row">
            <div class="col-md-3">
    
              <label>Admin 2 Wallet Address</label>
            </div>
            <div class="col-md-3">
                <input name="admin2" matinput="" type="text" id="admin2" placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>
          
        <div class="row">
            <div class="col-md-3">
    
              <label>Admin 3 Wallet Address</label>
            </div>
            <div class="col-md-3">
                <input name="admin3" matinput="" type="text" id="admin3" placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>
        
        <hr>

        <div class="row">
            <div class="col-md-3">
    
              <label><h3>Whitelist</h3></label>
            </div>
            
        </div>

        <div class="row">
            <div class="col-md-3">
    
              <label>Whitelist 1 Wallet Address</label>
              
            </div>
            <div class="col-md-3">
              
              <input name="whitelist1" class="address_val" type="text" id="whitelist1" placeholder="" aria-invalid="false" aria-required="false">
          
             </div>
        </div>
        <div class="row">
            <div class="col-md-3">
    
              <label>Whitelist 2 Wallet Address</label>
            </div>
            <div class="col-md-3">
                <input name="whitelist2" matinput="" type="text" id="whitelist2" placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>
          
        <div class="row">
            <div class="col-md-3">
    
              <label>Whitelist 3 Wallet Address</label>
            </div>
            <div class="col-md-3">
                <input name="whitelist3" matinput="" type="text" id="whitelist3" placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>

        <hr>
        
        <div class="row">
            <div class="col-md-3">
              <h3>Fees</h3>
            </div>
            <div class="col-md-3">
                  Fee is fixed at 0,5%.
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">    
              <label>Pool Percentage</label>
            </div>
            <div class="col-md-3">
            
                <input name="fee" matinput="" max="50" min="0" size="6" type="number" id="fee" placeholder="" aria-invalid="false" aria-required="false">
            </div>
        </div>
        <div class="row" id='fee_struct' style="display:None;">
            <div class="col-md-3">    

                  <ul>
                    <li><span id='you'></span> goes to you.</li>
                    <li>0.5% goes to The Fee.</li>
                    <li><b>Total: <span id='total'>0.50%</span></b></li>
                  </ul>
            </div>
        </div>
        
        <hr>
        
        <div class="row">
            <div class="col-md-12">    
                <h3>TOKEN DISTRIBUTION</h3>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">    
                Distributes Tokens Automatically
            </div>
            <!--
            <div class="col-md-3">    
                <select name='auto' id='auto'>
                Yes
                </select>
            </div>
            //-->
        </div>
        
        <hr>

        <div class="row">
            <div class="col-md-12">    
                <button type="button" id='pool' class="btn btn-accent">Create Key Pool</button>
            </div>
        </div>

</form>
<form id="page2" style="display:none;">
<h3>Pool Key Contract Address</h3>

<h4 id='poolkey'></h4>

</form>
<script>
var isPool=true;
$( document ).ready(function() {
    $('#fee').on('change', function(e) {
        $('#fee_struct').show();
        
        var fee=parseFloat($('#fee').val());
        var you=fee - 0.5;
        var you_msg = you + '%';
        $('#you').html(you_msg);
        var total_msg = fee  + '%';
        $('#total').html(total_msg);
        
        
        
    });
    
    function page2(address) {
        
        $('#page1').hide();
        $('#page2').show();
        $('#poolkey').html('<pre>' + address + '</pre>');
        
    
    }
    $('#pool').on('click', function (e) {
        var fee=Math.round(1 / parseFloat($('#fee').val() / 100));
        var whitelist=[];
        var admins=[];
        if ($('#whitelist1').val().length > 0) {
            whitelist.push($('#whitelist1').val());
        }
        if ($('#whitelist2').val().length > 0) {
            whitelist.push($('#whitelist2').val());
        }
        if ($('#whitelist3').val().length > 0) {
            whitelist.push($('#whitelist3').val());
        }
        
        if ($('#admin1').val().length > 0) {
            admins.push($('#admin1').val());
        }
        if ($('#admin2').val().length > 0) {
            admins.push($('#admin2').val());
        }
        if ($('#admin3').val().length > 0) {
            admins.push($('#admin3').val());
        }
        
        var max_contrib=parseInt($('#max_contrib').val());
        var max_per_contrib=parseInt($('#max_per_contrib').val());
        var min_per_contrib=parseInt($('#min_per_contrib').val());
        
        var beneficiary=$('#address').val();
        
        var address=get_pool(beneficiary, max_contrib, max_per_contrib, min_per_contrib, admins, whitelist, fee, page2);
         
    });
});
</script>
<script src="js/app.js"></script>
</body></html>